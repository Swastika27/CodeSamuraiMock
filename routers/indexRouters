const express = require('express');
const Book = require('../models/book.js');
const app = require('../app.js');

const router = express.Router({mergeParams : true});

router.post('/', async(req, res) => {
    // add books
    const book = new Book(req.body);

    const id = req.body.id;

    book.save()
        .then((result) => {
            res.status(201).json(req.body);
        })
        .catch((err) => {
            console.log(err);
        })
    // failure response not needed
})

router.put('/:id', async(req, res) => {
    const id = req.params.id;
    // update details of book with 'id'

    // Upon successful operation, your API must return a 200 status code with the updated book object.
    // Response status: 200 - Ok

    // If the requested book does not exist, respond with a 404 status code and an error message.
    // Response status: 404 - Not found
})

router.get('/:id', async(req, res) => {
    // fetch book by id
    // request will not have any body

   
})

router.get('/', (req, res) => {
    // Extract query parameters
    const title = req.query.title;
    const author = req.query.author;
    const sort = req.query.sort;
    const order = req.query.order;
  
    console.log(title);
    console.log(author);
    console.log(sort);
    console.log(order);
    res.send("got requst");

    // the request may contain 0 or more query parameters. when 0 parameter, if fetches all books.
    // response should contain an array named book that contains all books
    // success response
    // no failure response


  });


  module.exports = router;